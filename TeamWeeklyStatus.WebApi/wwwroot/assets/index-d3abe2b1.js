import{a as h,r as s,j as n,m as w}from"./index-e2ec6af0.js";import{h as c,d as M,C as k}from"./ckeditor-59ef8a65.js";const P=()=>{const{role:j,teamName:l,memberName:x,memberId:i}=h(),[b,O]=s.useState(i),[p,m]=s.useState(l),[t,D]=s.useState(null),E=c().startOf("week").toDate(),[d,S]=s.useState(E);c().endOf("week").toDate(),s.useEffect(()=>{m(l);const e=h.subscribe(a=>{a.teamName!==p&&m(a.teamName)});return()=>e()},[]),s.useEffect(()=>{(async()=>{const a={memberId:i,weekStartDate:d.toISOString()},r=await w("/WeeklyStatus/GetByMemberIdAndStartDate","POST",a);r&&D(r)})()},[b,d]);const N=(()=>{var r,u,f;if(!t)return"";let e="";e+="<h4>What was done this week:</h4>",e+="<ul>",(r=t==null?void 0:t.doneThisWeek)==null||r.forEach(o=>{e+=`<li>${o.taskDescription}`,o.subtasks&&o.subtasks.length>0&&(e+="<ul>",o.subtasks.forEach(T=>{e+=`<li>${T.subtaskDescription}</li>`}),e+="</ul>"),e+="</li>"}),e+="</ul>",e+="<h4>Plan for next week:</h4>",e+="<ul>",(u=t==null?void 0:t.planForNextWeek)==null||u.forEach(o=>{e+=`<li>${o}</li>`}),e+="</ul>",e+="<h4>Blockers:</h4>",e+=`<p>${(t==null?void 0:t.blockers)??"None"}</p>`,e+="<h4>Upcoming PTO:</h4>";const a=(f=t==null?void 0:t.upcomingPTO)==null?void 0:f.map(o=>c(o).format("MMM DD"));return a!=null&&a.length&&(e+=a.join(", ")),e})();return n.jsx("div",{className:"card mt-5 div__container",children:n.jsx("div",{className:"card-body card-content",children:n.jsx(M.CKEditor,{editor:k,data:N,config:{toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","blockQuote","insertTable","undo","redo","selectAll","copy"]}})})})};export{P as default};

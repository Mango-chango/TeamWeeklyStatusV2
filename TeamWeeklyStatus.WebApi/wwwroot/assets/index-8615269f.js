import{u,r as a,j as o,G as d,A as m,m as p,a as s}from"./index-fbb9df65.js";const S=()=>{const i=u();a.useState(""),a.useState("@mangochango.com");const[r,n]=a.useState(null),g=()=>{const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.onload=()=>{window.google.accounts.id.initialize({client_id:"91039693581-hprbpbenb5fjgm5ccq73d72cpu1o4ptf.apps.googleusercontent.com",callback:c}),window.google.accounts.id.renderButton(document.getElementById("buttonDiv"),{theme:"outline",size:"large"})},document.body.appendChild(t)};a.useEffect(()=>{g()},[]);const c=async t=>{const l=t.credential;console.log("idToken=",l);try{const e=await p("/GoogleAuth","POST",{idToken:l});e&&e.success?(s.getState().setRole(e.role),s.getState().setTeamName(e.teamName),s.getState().setMemberId(e.memberId),s.getState().setMemberName(e.memberName),s.getState().setIsAuthenticated(!0),i("/weekly-status")):n("Could not authenticate with Google. Please try again.")}catch(e){console.error("Google login error:",e),n("An unexpected error occurred. Please try again.")}};return o.jsxs("div",{className:"d-flex flex-column align-items-center mt-5",children:[o.jsx("h2",{children:"Welcome to the Team Weekly Status App!"}),o.jsx("h3",{children:"Sign in using your MangoChango account"}),o.jsx(d,{"data-testid":"google-login",onSuccess:c,onError:()=>n("Google Sign-In was unsuccessful. Try again later.")}),r&&o.jsx(m,{variant:"danger",className:"mt-3 w-300",children:r})]})};export{S as default};
